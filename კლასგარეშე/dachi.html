<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Mini Driving Game</title>
  <style>
    body {
      margin: 0;
      background: #444;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      font-family: sans-serif;
      overflow: hidden;
    }
    #game {
      position: relative;
      width: 400px;
      height: 600px;
      background: #555;
      overflow: hidden;
      border: 3px solid #222;
    }
    #player {
      position: absolute;
      width: 40px;
      height: 70px;
      background: red;
      bottom: 20px;
      left: 180px;
      border-radius: 5px;
    }
    .obstacle {
      position: absolute;
      width: 40px;
      height: 70px;
      background: green;
      border-radius: 5px;
    }
    #score {
      position: absolute;
      top: 5px;
      left: 5px;
      color: white;
      font-size: 20px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div id="game">
    <div id="score">Score: 0</div>
    <div id="player"></div>
  </div>

  <script>
    const game = document.getElementById('game');
    const player = document.getElementById('player');
    const scoreEl = document.getElementById('score');
    const gameWidth = game.offsetWidth;
    const gameHeight = game.offsetHeight;
    let playerX = 180;
    let playerY = 530;
    let speed = 4;
    let score = 0;
    let obstacles = [];

    // Handle player movement
    const keys = {};
    document.addEventListener('keydown', e => keys[e.key] = true);
    document.addEventListener('keyup', e => keys[e.key] = false);

    function createObstacle() {
      const obs = document.createElement('div');
      obs.className = 'obstacle';
      const x = Math.floor(Math.random() * (gameWidth - 40));
      obs.style.left = x + 'px';
      obs.style.top = '-70px';
      game.appendChild(obs);
      obstacles.push({el: obs, x: x, y: -70});
    }

    function update() {
      // Move player
      if (keys['ArrowLeft'] || keys['a']) playerX -= 5;
      if (keys['ArrowRight'] || keys['d']) playerX += 5;
      playerX = Math.max(0, Math.min(gameWidth - 40, playerX));
      player.style.left = playerX + 'px';

      // Move obstacles
      for (let i = obstacles.length - 1; i >= 0; i--) {
        obstacles[i].y += speed;
        obstacles[i].el.style.top = obstacles[i].y + 'px';

        // Collision detection
        if (obstacles[i].y + 70 > playerY &&
            obstacles[i].y < playerY + 70 &&
            obstacles[i].x + 40 > playerX &&
            obstacles[i].x < playerX + 40) {
          alert('Game Over! Score: ' + score);
          window.location.reload();
        }

        // Remove offscreen obstacles
        if (obstacles[i].y > gameHeight) {
          obstacles[i].el.remove();
          obstacles.splice(i, 1);
          score++;
          scoreEl.textContent = 'Score: ' + score;
        }
      }

      // Randomly spawn new obstacles
      if (Math.random() < 0.02) createObstacle();

      requestAnimationFrame(update);
    }

    update();
  </script>
</body>
</html>
